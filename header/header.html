<div class="header_gnb">
    <div class="header_bg" style="height: 0px"></div>
    <div class="gnb_wrap">
        <div class="gnb_inner">
            <h1>
                <a href="../index.html" class="goMain">
                    <img src="../image/ex_logo.jpg" alt="이오기술" />
                </a>
            </h1>
            <ul class="gnb">
                <li id="gnbMenuGreeting">
                    <a href="../greeting/greeting.html" class="gnb_on"><i>회사소개</i></a>
                    <div class="depth">
                        <ul>
                            <li>
                                <a href="../greeting/greeting.html"><i>인사말</i></a>
                            </li>
                            <li>
                                <a href="../business/business.html"><i>연혁</i></a>
                            </li>
                            <li>
                                <a href="../history/history.html"><i>사업분야</i></a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li id="gnbMenuFmt">
                    <a href="../fmt/fmt_list.html" class="gnb_on"><i>이오발효기</i></a>
                    <div class="depth">
                        <ul>
                            <li>
                                <a href="../fmt/fmt1.html"><i>EO-1000</i></a>
                            </li>
                            <li>
                                <a href="../fmt/fmt2.html"><i>EO-1500</i></a>
                            </li>
                            <li>
                                <a href="../fmt/fmt3.html"><i>EO-2000</i></a>
                            </li>
                            <li>
                                <a href="../fmt/fmt4.html"><i>EO-2600</i></a>
                            </li>
                            <li>
                                <a href="../fmt/fmt5.html"><i>EO-3000</i></a>
                            </li>
                            <li>
                                <a href="../fmt/fmt6.html"><i>EO-5000</i></a>
                            </li>
                            <li>
                                <a href="../fmt/fmt7.html"><i>EO-6000</i></a>
                            </li>
                            <li>
                                <a href="../fmt/fmt8.html"><i>EO-9000</i></a>
                            </li>
                            <li>
                                <a href="../fmt/fmt9.html"><i>EO-13500</i></a>
                            </li>
                            <li>
                                <a href="../fmt/fmt10.html"><i>EO-16000</i></a>
                            </li>
                            <li>
                                <a href="../fmt/fmt11.html"><i>EO-18000</i></a>
                            </li>
                            <li>
                                <a href="../fmt/fmt12.html"><i>생균제생산플랜트</i></a>
                            </li>
                            <li>
                                <a href="../fmt/fmt13.html"><i>발효사료생산플랜트</i></a>
                            </li>
                            <li>
                                <a href="../fmt/fmt14.html"><i>TMF(자가사료)생산플랜트</i></a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li id="gnbMenuCbt">
                    <a href="../ctb/ctb.html" class="no-dep"><i>배양기/부속장치</i></a>
                </li>
                <li id="gnbMenuSupport">
                    <a href="../faq/faq.html" class="gnb_on"><i> 고객지원</i></a>
                    <div class="depth">
                        <ul>
                            <li>
                                <a href="../faq/faq.html"><i>자주하는 질문</i></a>
                            </li>
                            <li>
                                <a href="../location/location.html"><i>오시는 길</i></a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
            <!-- 햄버거 버튼 -->
            <button class="mobile_menu_btn">
                <span></span>
                <span></span>
                <span></span>
            </button>

            <!-- 모바일 메뉴 오버레이 -->
            <div class="mobile_overlay"></div>

            <!-- 모바일 메뉴 -->
            <div class="mobile_menu">
                <button class="mobile_close_btn">×</button>
                <div class="mobile_menu_inner">
                    <ul class="mobile_gnb">
                        <!-- 회사소개 -->
                        <li class="has-sub">
                            <a href="#">회사소개</a>
                            <ul class="sub_menu">
                                <li><a href="../greeting/greeting.html">인사말</a></li>
                                <li><a href="../business/business.html">연혁</a></li>
                                <li><a href="../history/history.html">사업분야</a></li>
                            </ul>
                        </li>

                        <!-- 이오발효기 -->
                        <li class="has-sub">
                            <a href="#">이오발효기</a>
                            <ul class="sub_menu">
                                <li><a href="../fmt/fmt1.html">EO-1000</a></li>
                                <li><a href="../fmt/fmt2.html">EO-1500</a></li>
                                <li><a href="../fmt/fmt3.html">EO-2000</a></li>
                                <li><a href="../fmt/fmt4.html">EO-2600</a></li>
                                <li><a href="../fmt/fmt5.html">EO-3000</a></li>
                                <li><a href="../fmt/fmt6.html">EO-5000</a></li>
                                <li><a href="../fmt/fmt7.html">EO-6000</a></li>
                                <li><a href="../fmt/fmt8.html">EO-9000</a></li>
                                <li><a href="../fmt/fmt9.html">EO-13500</a></li>
                                <li><a href="../fmt/fmt10.html">EO-16000</a></li>
                                <li><a href="../fmt/fmt11.html">EO-18000</a></li>
                                <li><a href="../fmt/fmt12.html">생균제생산플랜트</a></li>
                                <li><a href="../fmt/fmt13.html">발효사료생산플랜트</a></li>
                                <li><a href="../fmt/fmt14.html">TMF(자가사료)생산플랜트</a></li>
                            </ul>
                        </li>

                        <!-- 배양기/부속장치 -->
                        <li>
                            <a href="../ctb/ctb.html">배양기/부속장치</a>
                        </li>

                        <!-- 고객지원 -->
                        <li class="has-sub">
                            <a href="#">고객지원</a>
                            <ul class="sub_menu">
                                <li><a href="../faq/faq.html">자주하는 질문</a></li>
                                <li><a href="../location/location.html">오시는 길</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // gnb 인터렉션
    $(".gnb_inner > .gnb li").each(function () {
        $(this)
            .stop()
            .mouseleave(function () {
                var $this = $(this);
                $this.addClass("out");
                setTimeout(function () {
                    $this.removeClass("out");
                }, 500);
            });
    });

    // gnb 뎁스
    $(".gnb_inner > .gnb li")
        .not(".no-dep")
        .stop()
        .mouseover(function () {
            $(".header_gnb").addClass("gnb_on");
            $(".gnb_inner > .gnb li").removeClass("gnb_on");
            $(this).addClass("gnb_on");

            // 서브에 마우스 오버시 메뉴 활성화
            $(".gnb_inner > .gnb li").removeClass("aniStop");
            $(this).addClass("aniStop");

            // let indexWithoutNoDep = $(this).index();
            let gnbMenuId = $(this).attr("id");
            if (gnbMenuId === "gnbMenuGreeting") {
                $(".header_bg").css("height", "178px");
            } else if (gnbMenuId === "gnbMenuFmt") {
                $(".header_bg").css("height", "622px");
            } else if (gnbMenuId === "gnbMenuSupport") {
                $(".header_bg").css("height", "138px");
            } else {
                $(".header_bg").css("height", "0");
            }
        })
        .mouseout(function () {
            $(".header_bg").css("height", "0");
        });

    $(".header_gnb")
        .stop()
        .mouseleave(function () {
            setTimeout(function () {
                $(".header_gnb").removeClass("gnb_on");
                $(".gnb_inner > .gnb > li").not(".gnb_searchBox").removeClass("gnb_on");
            }, 100);
        });

    $(".gnb_inner > .gnb .li-lang").click(function () {
        var chk = $(".gnb_inner > .gnb .lang-ul").css("display");
        if (chk == "none") {
            $(".gnb_inner> .gnb .lang-ul").slideDown();
        } else {
            $(".gnb_inner> .gnb .lang-ul").slideUp();
        }
    });

    // no 뎁스 호버시 하위메뉴 숨기기
    $(".gnb li.no-dep").mouseover(function () {
        $(".header_gnb").removeClass("gnb_on");
        $(".gnb_inner > .gnb li").removeClass("gnb_on");
        $(this).removeClass("gnb_on");
    });

    // gnb 클릭시 focus클래스 추가
    $(".gnb > li").removeClass("focus");

    // 모바일 메뉴 열기
    $(".mobile_menu_btn").on("click", function () {
        $(".mobile_menu").addClass("active");
        $(".mobile_overlay").addClass("active");
        $("body").css("overflow", "hidden"); // 스크롤 방지
    });

    // 모바일 메뉴 닫기
    $(".mobile_close_btn, .mobile_overlay").on("click", function () {
        $(".mobile_menu").removeClass("active");
        $(".mobile_overlay").removeClass("active");
        $("body").css("overflow", "");
    });

    // 아코디언 토글
    $(".mobile_gnb > li.has-sub > a").on("click", function (e) {
        e.preventDefault(); // 상위 링크 막기
        var parent = $(this).parent();

        if (parent.hasClass("active")) {
            parent.removeClass("active");
            parent.find(".sub_menu").slideUp(200);
        } else {
            $(".mobile_gnb > li.has-sub").removeClass("active").find(".sub_menu").slideUp(200);
            parent.addClass("active");
            parent.find(".sub_menu").slideDown(200);
        }
    });
</script>
